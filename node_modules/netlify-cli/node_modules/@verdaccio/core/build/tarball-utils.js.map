{"version":3,"file":"tarball-utils.js","names":["_url","require","getVersionFromTarball","fileName","groups","replace","match","undefined","extractTarballFromUrl","url","urlObject","URL","pathname","composeTarballFromPackage","name","version","includes","split"],"sources":["../src/tarball-utils.ts"],"sourcesContent":["import { URL } from 'url';\n\n/**\n * Return package version from tarball name\n *\n * test-1.2.4.tgz -> 1.2.4\n * @param {String} fileName\n * @returns {String}\n */\nexport function getVersionFromTarball(fileName: string): string | void {\n  const groups = fileName.replace(/\\.tgz$/, '').match(/^[^/]+-(\\d+\\.\\d+\\.\\d+.*)/);\n\n  return groups !== null ? groups[1] : undefined;\n}\n\n/**\n * Extract the tarball name from a registry dist url\n *\n * https://registry.npmjs.org/test/-/test-0.0.2.tgz -> test-0.0.2.tgz\n * @param tarball tarball url\n * @returns tarball filename\n */\nexport function extractTarballFromUrl(url: string): string {\n  const urlObject = new URL(url);\n  return urlObject.pathname.replace(/^.*\\//, '');\n}\n\n/**\n * Build the tarball filename from paackage name and version\n *\n * test, 1.2.4 -> test-1.2.4.tgz\n * @scope/name, 1.2.4 -> name-1.2.4.tgz\n * @param name package name\n * @param version package version\n * @returns tarball filename\n */\nexport function composeTarballFromPackage(name: string, version: string): string {\n  if (name.includes('/')) {\n    return `${name.split('/')[1]}-${version}.tgz`;\n  } else {\n    return `${name}-${version}.tgz`;\n  }\n}\n"],"mappings":";;;;;;;;AAAA,IAAAA,IAAA,GAAAC,OAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,qBAAqBA,CAACC,QAAgB,EAAiB;EACrE,MAAMC,MAAM,GAAGD,QAAQ,CAACE,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,0BAA0B,CAAC;EAE/E,OAAOF,MAAM,KAAK,IAAI,GAAGA,MAAM,CAAC,CAAC,CAAC,GAAGG,SAAS;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,qBAAqBA,CAACC,GAAW,EAAU;EACzD,MAAMC,SAAS,GAAG,IAAIC,QAAG,CAACF,GAAG,CAAC;EAC9B,OAAOC,SAAS,CAACE,QAAQ,CAACP,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;AAChD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASQ,yBAAyBA,CAACC,IAAY,EAAEC,OAAe,EAAU;EAC/E,IAAID,IAAI,CAACE,QAAQ,CAAC,GAAG,CAAC,EAAE;IACtB,OAAO,GAAGF,IAAI,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAIF,OAAO,MAAM;EAC/C,CAAC,MAAM;IACL,OAAO,GAAGD,IAAI,IAAIC,OAAO,MAAM;EACjC;AACF","ignoreList":[]}